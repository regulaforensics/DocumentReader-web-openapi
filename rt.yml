openapi: 3.0.4
components:
  schemas:
    ContainerType:
      title: "ContainerType"
      type: integer
      description: "Same as Result type, but used for safe parsing of not-described values. See Result type."
      default: 0

    Result:
      title: "Result"
      type: integer
      enum:
        - 1
        - 3
        - 5
        - 6
        - 7
        - 8
        - 9
        - 15
        - 16
        - 17
        - 18
        - 19
        - 20
        - 26
        - 30
        - 32
        - 33
        - 34
        - 35
        - 36
        - 37
        - 38
        - 39
        - 49
        - 50
        - 61
        - 62
        - 85
        - 87
        - 97
        - 101
        - 102
        - 103
        - 104
        - 105
        - 109
      x-enum-descriptions:
        - "Contains cropped and rotated with perspective compensation image of document. Single input image can contain multiple document side/pages, which will be returned as separated results. Most of coordinates in other types defined on that image"
        - "Contains MRZ OCR results"
        - "Contains raw information about barcodes on the input image"
        - "Contains cropped graphic fields from Visual zone"
        - "Contains result of MRZTestQuality"
        - "Contains list of document type candidates with their probabilities and descriptions"
        - "Contains description of determined document type, if any"
        - "Contains lexical data analysis results that allow you to compare MRZ OCR results, Visual zone OCR results, barcodes and RFID chip data for an additional assessment of the authenticity of the document (this is an old format, better use TEXT type)"
        - "Contains raw uncropped images"
        - "Contains Visual zone OCR results"
        - "Contains barcode parsing result with text fields"
        - "Contains barcode parsing result with graphic fields"
        - "Contains result of document authenticity checks"
        - "Contains result of DocVisualExtendedInfoContainer"
        - "Contains image quality check results"
        - "Contains result of DocGraphicsInfoContainer"
        - "Contains check statuses with details, grouped by source"
        - "Contains result of portraits comparison"
        - "Contains result of DocGraphicsInfoContainer"
        - "Contains document textual fields from all sources (mrz, rfid, visual, barcode) with validity and cross-source compare checks"
        - "Contains images from all document sources (mrz, rfid, visual, barcode)"
        - "Contains result of DocGraphicsInfoContainer"
        - "Contains result of fingerprints comparison"
        - "Contains encrypted ResultContainerList"
        - "Contains license"
        - "Contains result of DocumentPosition"
        - "Contains result of DocumentPosition"
        - "Contains information about document position on the input image, its center, angle, etc"
        - "Contains result of MRZDetectorResult"
        - "Contains result of FaceDetection"
        - "Contains RFID raw data"
        - "Contains RFID text results"
        - "Contains RFID graphic results"
        - "Contains RFID binary data"
        - "Contains RFID original graphics data"
        - "Digital Travel Credential data"
      x-enum-varnames:
        - "DOCUMENT_IMAGE"
        - "MRZ_TEXT"
        - "BARCODES"
        - "VISUAL_GRAPHICS"
        - "MRZ_TEST_QUALITY"
        - "DOCUMENT_TYPE_CANDIDATES"
        - "DOCUMENT_TYPE"
        - "LEXICAL_ANALYSIS"
        - "RAW_UNCROPPED_IMAGE"
        - "VISUAL_TEXT"
        - "BARCODE_TEXT"
        - "BARCODE_GRAPHICS"
        - "AUTHENTICITY"
        - "MAGNETIC_STRIPE_TEXT_DATA"
        - "IMAGE_QUALITY"
        - "LIVE_PORTRAIT"
        - "STATUS"
        - "PORTRAIT_COMPARISON"
        - "EXT_PORTRAIT"
        - "TEXT"
        - "IMAGES"
        - "FINGERPRINTS"
        - "FINGERPRINT_COMPARISON"
        - "ENCRYPTED_RCL"
        - "LICENSE"
        - "MRZ_POSITION"
        - "BARCODE_POSITION"
        - "DOCUMENT_POSITION"
        - "MRZ_DETECTOR"
        - "FACE_DETECTION"
        - "RFID_RAW_DATA"
        - "RFID_TEXT"
        - "RFID_GRAPHICS"
        - "RFID_BINARY_DATA"
        - "RFID_ORIGINAL_GRAPHICS"
        - "DTC_VC"

    ResultItem:
      title: "ResultItem"
      type: object
      description: "Common fields for all result objects"
      required:
        - result_type
      properties:
        buf_length:
          type: integer
        light:
          type: integer
        list_idx:
          type: integer
        page_idx:
          type: integer
        result_type:
          $ref: "#/components/schemas/ContainerType"
      discriminator:
        propertyName: result_type
        mapping:
          1: "DocumentImageResult"
          3: "TextDataResult"
          5: "DocBarCodeInfo"
          6: "GraphicsResult"
          7: "MRZTestQualityResult"
          8: "DocumentTypesCandidatesResult"
          9: "ChosenDocumentTypeResult"
          15: "LexicalAnalysisResult"
          16: "DocumentImageResult"
          17: "TextDataResult"
          18: "TextDataResult"
          19: "GraphicsResult"
          20: "AuthenticityResult"
          26: "TextDataResult"
          30: "ImageQualityResult"
          32: "GraphicsResult"
          33: "StatusResult"
          34: "AuthenticityResult"
          35: "GraphicsResult"
          36: "TextResult"
          37: "ImagesResult"
          38: "GraphicsResult"
          39: "AuthenticityResult"
          49: "EncryptedRCLResult"
          50: "LicenseResult"
          61: "MRZPositionResult"
          62: "DocumentPositionResult"
          85: "DocumentPositionResult"
          87: "MRZDetectorResult"
          97: "FaceDetectionResult"
          102: "TextDataResult"
          103: "GraphicsResult"
          104: "DocumentBinaryInfoResult"
          109: "ByteArrayResult"

    ContainerList:
      title: "ContainerList"
      type: object
      description: "List with various objects, containing processing results"
      required:
        - Count
        - List
      properties:
        Count:
          type: integer
          description: "Length of list (Count for items)"
        List:
          type: array
          items:
            oneOf:
              - $ref: "#/components/schemas/StatusResult"
              - $ref: "#/components/schemas/TextResult"
              - $ref: "#/components/schemas/DocumentImageResult"
              - $ref: "#/components/schemas/ImagesResult"
              - $ref: "#/components/schemas/ChosenDocumentTypeResult"
              - $ref: "#/components/schemas/DocumentTypesCandidatesResult"
              - $ref: "#/components/schemas/TextDataResult"
              - $ref: "#/components/schemas/GraphicsResult"
              - $ref: "#/components/schemas/LexicalAnalysisResult"
              - $ref: "#/components/schemas/AuthenticityResult"
              - $ref: "#/components/schemas/ImageQualityResult"
              - $ref: "#/components/schemas/DocumentPositionResult"
              - $ref: "#/components/schemas/DocBarCodeInfo"
              - $ref: "#/components/schemas/LicenseResult"
              - $ref: "#/components/schemas/EncryptedRCLResult"
              - $ref: "#/components/schemas/DocumentBinaryInfoResult"
              - $ref: "#/components/schemas/ByteArrayResult"
              - $ref: "#/components/schemas/FaceDetectionResult"
              - $ref: "#/components/schemas/MRZDetectorResult"
              - $ref: "#/components/schemas/MRZPositionResult"
              - $ref: "#/components/schemas/MRZTestQualityResult"

    StatusResult:
      title: "StatusResult"
      allOf:
        - type: object
          required:
            - Status
          properties:
            Status:
              $ref: "./rt-status.yml#/components/schemas/Status"
        - $ref: "#/components/schemas/ResultItem"

    TextResult:
      title: "TextResult"
      allOf:
        - type: object
          required:
            - Text
          properties:
            Text:
              $ref: "./rt-text.yml#/components/schemas/Text"
        - $ref: "#/components/schemas/ResultItem"

    DocumentImageResult:
      title: "DocumentImageResult"
      description: "Contains document image."
      allOf:
        - type: object
          required:
            - RawImageContainer
          properties:
            RawImageContainer:
              $ref: "./common.yml#/components/schemas/ImageData"
        - $ref: "#/components/schemas/ResultItem"

    ImagesResult:
      title: "ImagesResult"
      allOf:
        - type: object
          required:
            - Images
          properties:
            Images:
              $ref: "./rt-images.yml#/components/schemas/Images"
        - $ref: "#/components/schemas/ResultItem"

    ChosenDocumentTypeResult:
      title: "ChosenDocumentTypeResult"
      description: "Contains information about the type of document that was determined
      based on the analysis of the provided image"
      allOf:
        - type: object
          required:
            - OneCandidate
          properties:
            OneCandidate:
              $ref: "./rt-doc-type-old.yml#/components/schemas/OneCandidate"
            XML_buffer:
              type: string
              readOnly: true
        - $ref: "#/components/schemas/ResultItem"

    DocumentTypesCandidatesResult:
      title: "DocumentTypesCandidatesResult"
      allOf:
        - type: object
          properties:
            CandidatesList:
              $ref: "./rt-doc-type-old.yml#/components/schemas/DocumentTypesCandidatesList"
        - $ref: "#/components/schemas/ResultItem"

    TextDataResult:
      title: "TextDataResult"
      description: "Text fields extracted from one document source.
      Contains results of specific source for each provided page."
      allOf:
        - type: object
          required:
            - DocVisualExtendedInfo
          properties:
            DocVisualExtendedInfo:
              $ref: "./rt-text-data.yml#/components/schemas/DocVisualExtendedInfo"
        - $ref: "#/components/schemas/ResultItem"

    GraphicsResult:
      title: "GraphicsResult"
      description: "Graphic fields extracted from one of the document sources.
      Returns separate results for each provided page."
      required:
        - DocGraphicsInfo
      allOf:
        - type: object
          properties:
            DocGraphicsInfo:
              $ref: "./rt-image-data.yml#/components/schemas/GraphicFieldsList"
        - $ref: "#/components/schemas/ResultItem"

    ByteArrayResult:
      title: "ByteArrayResult"
      allOf:
        - type: object
          required:
            - ByteArray
          properties:
            ByteArray:
              description: "Byte array in base64"
              type: string
        - $ref: "#/components/schemas/ResultItem"

    LexicalAnalysisResult:
      title: "LexicalAnalysisResult"
      description: |
        Lexical data analysis allows you to compare the results of reading the text data of the MRZ,
        the document filling area, barcodes and data from the memory of the RFID chip for an additional
        assessment of the authenticity of the document. Single result for all pages.
        Consider using Result.TEXT type for more simplicity.
      allOf:
        - type: object
          required:
            - ListVerifiedFields
          properties:
            ListVerifiedFields:
              $ref: "./rt-ocr-lexical-analysis.yml#/components/schemas/ListVerifiedFields"
        - $ref: "#/components/schemas/ResultItem"

    AuthenticityResult:
      title: "AuthenticityResult"
      allOf:
        - type: object
          required:
            - AuthenticityCheckList
          properties:
            AuthenticityCheckList:
              $ref: "./rt-authenticity.yml#/components/schemas/AuthenticityCheckList"
        - $ref: "#/components/schemas/ResultItem"

    ImageQualityResult:
      title: "ImageQualityResult"
      allOf:
        - type: object
          required:
            - ImageQualityCheckList
          properties:
            ImageQualityCheckList:
              $ref: "./rt-image-quality.yml#/components/schemas/ImageQualityCheckList"
        - $ref: "#/components/schemas/ResultItem"

    DocumentPositionResult:
      title: "DocumentPositionResult"
      description: "Contains information about document position on the input image, its center, angle, etc"
      allOf:
        - type: object
          required:
            - DocumentPosition
          properties:
            DocumentPosition:
              $ref: "./rt-document-position.yml#/components/schemas/DocumentPosition"
        - $ref: "#/components/schemas/ResultItem"

    DocBarCodeInfo:
      title: "DocBarCodeInfo"
      description: "Raw data from BarCodes"
      allOf:
        - type: object
          required:
            - DocBarCodeInfo
          properties:
            DocBarCodeInfo:
              $ref: "./rt-barcodes.yml#/components/schemas/DocBarCodeInfoFieldsList"
        - $ref: "#/components/schemas/ResultItem"

    LicenseResult:
      title: "LicenseResult"
      allOf:
        - type: object
          description: "Contains license"
          required:
            - License
          properties:
            License:
              $ref: "./common.yml#/components/schemas/License"
        - $ref: "#/components/schemas/ResultItem"

    EncryptedRCLResult:
      title: "EncryptedRCLResult"
      allOf:
        - type: object
          description: "Contains encrypted result container list"
          required:
            - EncryptedRCL
          properties:
            EncryptedRCL:
              $ref: "./common.yml#/components/schemas/EncryptedRCL"
        - $ref: "#/components/schemas/ResultItem"

    DocumentBinaryInfoResult:
      title: "DocumentBinaryInfoResult"
      allOf:
        - type: object
          description: "Structure is used to store the data reading results from the RFID-chip in
          a form of a list of the logically separated data groups."
          required:
            - TDocBinaryInfo
          properties:
            TDocBinaryInfo:
              $ref: "./rt-rfid-binary-data.yml#/components/schemas/TDocBinaryInfo"
        - $ref: "#/components/schemas/ResultItem"

    FaceDetectionResult:
      title: "FaceDetectionResult"
      allOf:
        - type: object
          required:
            - FaceDetection
          properties:
            FaceDetection:
              $ref: "./rt-face-detection.yml#/components/schemas/FaceDetection"
        - $ref: "#/components/schemas/ResultItem"

    MRZDetectorResult:
      title: "MRZDetectorResult"
      allOf:
        - type: object
          required:
            - ResultMRZDetector
          properties:
            ResultMRZDetector:
              $ref: "./rt-mrz-detector.yml#/components/schemas/ResultMRZDetector"
        - $ref: "#/components/schemas/ResultItem"

    MRZPositionResult:
      title: "MRZPositionResult"
      allOf:
        - type: object
          required:
            - MrzPosition
          properties:
            MrzPosition:
              $ref: "./rt-mrz-position.yml#/components/schemas/MrzPosition"
        - $ref: "#/components/schemas/ResultItem"

    MRZTestQualityResult:
      title: "MRZTestQualityResult"
      allOf:
        - type: object
          required:
            - MRZTestQuality
          properties:
            MRZTestQuality:
              $ref: "./rt-mrz-test-quality.yml#/components/schemas/MRZTestQuality"
        - $ref: "#/components/schemas/ResultItem"
