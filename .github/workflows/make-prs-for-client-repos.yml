name: Make PRs for client repositories

on:
  workflow_dispatch:
    inputs:
      source_branch:
        description: "Source branch"
        default: "develop"
        type: choice
        required: true
        options:
          - develop
          - master
          - stable
      target_branch:
        description: "Target branch"
        default: "master"
        type: choice
        required: true
        options:
          - develop
          - master
          - stable

jobs:
  create-pr-for-python-client:
    runs-on: ubuntu-latest
    steps:
      - name: Create PR from source to target branch
        run: |
          gh pr create --base ${{ github.event.inputs.target }} --head ${{ github.event.inputs.source }} --title '[GitHub Actions] Merge ${{ github.event.inputs.source }} -> ${{ github.event.inputs.target }}' --label OpenAPI --body 'Autogenerated Pull Request triggered by Github Actions in OpenAPI repository' --repo regulaforensics/DocumentReader-web-python-client
          gh pr create --base ${{ github.event.inputs.target }} --head ${{ github.event.inputs.source }} --title '[GitHub Actions] Merge ${{ github.event.inputs.source }} -> ${{ github.event.inputs.target }}' --label OpenAPI --body 'Autogenerated Pull Request triggered by Github Actions in OpenAPI repository' --repo regulaforensics/DocumentReader-web-js-client
          gh pr create --base ${{ github.event.inputs.target }} --head ${{ github.event.inputs.source }} --title '[GitHub Actions] Merge ${{ github.event.inputs.source }} -> ${{ github.event.inputs.target }}' --label OpenAPI --body 'Autogenerated Pull Request triggered by Github Actions in OpenAPI repository' --repo regulaforensics/DocumentReader-web-java-client
          gh pr create --base ${{ github.event.inputs.target }} --head ${{ github.event.inputs.source }} --title '[GitHub Actions] Merge ${{ github.event.inputs.source }} -> ${{ github.event.inputs.target }}' --label OpenAPI --body 'Autogenerated Pull Request triggered by Github Actions in OpenAPI repository' --repo regulaforensics/DocumentReader-web-csharp-client
        env:
          GITHUB_TOKEN: ${{ secrets.REGULA_GITHUB_PUSH_TOKEN }}
